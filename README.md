# laravel-webpack-cleanup-plugin

This [webpack](http://webpack.github.io) plugin cleans up the extraneous files
from the webpack's output path.

Since it runs when the compile process is finished, it is useful when building
on production to remove the assets created by previous builds.

```
npm i -SD laravel-webpack-cleanup-plugin
```

[![npm version](https://img.shields.io/npm/v/laravel-webpack-cleanup-plugin.svg?style=flat-square)](https://www.npmjs.com/package/laravel-webpack-cleanup-plugin)
[![npm downloads](https://img.shields.io/npm/dm/laravel-webpack-cleanup-plugin.svg?style=flat-square)](http://npm-stat.com/charts.html?package=laravel-webpack-cleanup-plugin)
[![Build Status](https://img.shields.io/travis/zandzpider/laravel-webpack-cleanup-plugin.svg?style=flat-square)](https://travis-ci.org/zandzpider/laravel-webpack-cleanup-plugin)

⚠️ **Beware!** This plugins actually delete files. Make sure it's safe for your app
to delete files not generated by webpack. Use the `exclude` option if you want to
keep files that are not webpack assets.

## Usage

Install via npm:

```
npm i -SD laravel-webpack-cleanup-plugin
```

Then add the plugin to the `plugins` array in your webpack's config, e.g.:

```js
// webpack.config.js
import LaravelWebpackCleanupPlugin from 'laravel-webpack-cleanup-plugin';
const config = {
  output: {
    path: "/my/output/path" // absolute path
  },
  // ...
  plugins: [
    new LaravelWebpackCleanupPlugin('build/assets/js')
  ]
}
export default config;
```

### Options

* Specify the manifest.json file.

```js
// Default manifest file "assets/build/rev-manifest.json"
new LaravelWebpackCleanupPlugin('build/assets/js', {
  manifest: 'assets/build/rev-manifest.json',
})
```

* If you want to keep some files in the output path, e.g. a `stats.json` file generated from some other
plugins.

```js
// Do not delete `stats.json`, `important.json`, and everything in `folder`
new LaravelWebpackCleanupPlugin('build/assets/js', {
  exclude: ["stats.json", "important.js"],
})
```

* To mute the console output, use the **`quiet`** option:

```js
new LaravelWebpackCleanupPlugin('build/assets/js', {
  quiet: true,
})
```

* To print the list of the files that will be deleted without actually deleting them, use the **`preview`** option:

```js
new LaravelWebpackCleanupPlugin('build/assets/js', {
  preview: true,
})
```